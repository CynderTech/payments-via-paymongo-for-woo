<?php
/**
 * PHP version 7
 * 
 * PayMongo - BillEase Payment Method
 * 
 * @category Plugin
 * @package  PayMongo
 * @author   PayMongo <devops@cynder.io>
 * @license  n/a (http://127.0.0.0)
 * @link     n/a
 */

if (!defined('ABSPATH')) {
    exit; // Exit if accessed directly
}

/**
 * PayMongo - BillEase Payment Method Class
 * 
 * @category Class
 * @package  PayMongo
 * @author   PayMongo <devops@cynder.io>
 * @license  n/a (http://127.0.0.0)
 * @link     n/a
 */
class Cynder_PayMongo_BillEase extends Cynder_PayMongo_Payment_Intent_Gateway
{
    /**
     * Singleton instance
     * 
     * @var Singleton The reference the *Singleton* instance of this class
     */
    private static $_instance;

    /**
     * Returns the *Singleton* instance of this class.
     *
     * @return Singleton The *Singleton* instance.
     */
    public static function getInstance()
    {
        if (null === self::$_instance ) {
            self::$_instance = new self();
        }

        return self::$_instance;
    }

    /**
     * Starting point of the payment gateway
     * 
     * @since 1.0.0
     */
    public function __construct()
    {
        $this->id = PAYMONGO_BILLEASE;
        $this->method_title = 'BillEase Payments via PayMongo';
        $this->method_description = 'Simple and easy payments '
            . 'with BillEase';

        parent::__construct();
    }

    /**
     * Payment Gateway Settings Page Fields
     * 
     * @return void
     * 
     * @since 1.0.0
     */
    public function initFormFields()
    {
        $this->form_fields = array(
            'enabled' => array(
                'title'       => 'Enable/Disable',
                'label'       => 'Enable BillEase Gateway via PayMongo',
                'type'        => 'checkbox',
                'description' => '',
                'default'     => 'no'
            ),
            'title' => array(
                'type'        => 'text',
                'title'       => 'Title',
                'description' => 'This controls the title that ' .
                                 'the user sees during checkout.',
                'default'     => 'BillEase via PayMongo',
                'desc_tip'    => true,
            ),
            'description' => array(
                'title'       => 'Description',
                'type'        => 'textarea',
                'description' => 'This controls the description that ' .
                                 'the user sees during checkout.',
                'default'     => 'Simple and easy payments.',
            ),
        );
    }
    
    /**
     * Get Icon for checkout page
     * 
     * @return string
     */
    public function get_icon() // phpcs:ignore
    {
        $icons_str = '<svg xmlns="http://www.w3.org/2000/svg" width="77" height="18" viewBox="0 0 77 18"><g fill="none"><path d="M5.088 17.232c.736 0 1.46-.096 2.172-.288.712-.192 1.352-.524 1.92-.996.568-.472 1.024-1.132 1.368-1.98.344-.848.516-1.928.516-3.24 0-1.952-.456-3.468-1.368-4.548-.912-1.08-2.28-1.62-4.104-1.62-.336 0-.74.048-1.212.144-.472.096-.936.224-1.392.384-.091.032-.18.066-.264.1l-.229.104L2.496 0H0v14.496c0 .56.14 1.016.42 1.368.28.352.66.628 1.14.828.48.2 1.024.34 1.632.42.608.08 1.24.12 1.896.12zm-.12-2.184c-.384 0-.764-.028-1.14-.084-.376-.056-.692-.172-.948-.348s-.384-.424-.384-.744v-6.48c.416-.24.868-.416 1.356-.528.488-.112.94-.168 1.356-.168.752 0 1.368.16 1.848.48.48.32.84.784 1.08 1.392.24.608.36 1.36.36 2.256 0 .784-.096 1.492-.288 2.124-.192.632-.544 1.14-1.056 1.524-.512.384-1.24.576-2.184.576zM16.075 2.904V.624h-2.688v2.28h2.688zm-.072 13.968L15.98 4.896h-2.52v11.976h2.544zm5.515 0V.264h-2.496v16.608h2.496zm5.458 0V.264H24.48v16.608h2.496z" class="fill-current"></path> <path fill="#F63F3F" d="M35.122 17.232c.88 0 1.672-.076 2.376-.228.704-.152 1.336-.348 1.896-.588v-2.328c-.288.144-.632.292-1.032.444-.4.152-.836.276-1.308.372-.472.096-.98.144-1.524.144-1.216 0-2.136-.348-2.76-1.044-.535-.597-.841-1.431-.917-2.504l-.005-.076h8.458c.014-1.238-.124-2.337-.414-3.297l-.102-.315c-.36-1.032-.94-1.836-1.74-2.412-.8-.576-1.848-.864-3.144-.864-1.76 0-3.132.54-4.116 1.62-.984 1.08-1.476 2.668-1.476 4.764 0 1.36.236 2.512.708 3.456s1.144 1.656 2.016 2.136c.872.48 1.9.72 3.084.72zm2.62-7.68H31.91l.01-.087c.047-.347.112-.657.195-.928l.067-.197c.232-.632.572-1.08 1.02-1.344.448-.264.992-.396 1.632-.396.992 0 1.72.284 2.184.852.356.437.59 1.07.701 1.9l.023.2zm9.243 7.68c1.056 0 2-.076 2.832-.228.832-.152 1.492-.44 1.98-.864s.732-1.028.732-1.812v-5.76c0-.608-.088-1.136-.264-1.584-.176-.448-.42-.828-.732-1.14-.312-.312-.668-.56-1.068-.744-.4-.184-.828-.32-1.284-.408-.456-.088-.908-.132-1.356-.132-.912 0-1.796.092-2.652.276-.856.184-1.508.428-1.956.732V7.92c.464-.384 1.056-.684 1.776-.9.72-.216 1.416-.324 2.088-.324.944 0 1.672.196 2.184.588.512.392.768 1.012.768 1.86v1.137l-.17-.098c-.07-.037-.14-.073-.214-.108l-.228-.103c-.392-.168-.832-.3-1.32-.396-.488-.096-1.036-.144-1.644-.144-.912 0-1.696.144-2.352.432-.656.288-1.16.72-1.512 1.296-.352.576-.528 1.312-.528 2.208 0 .752.14 1.38.42 1.884.28.504.656.9 1.128 1.188.472.288.996.492 1.572.612.576.12 1.176.18 1.8.18zm.288-1.968c-.448 0-.876-.068-1.284-.204-.408-.136-.748-.352-1.02-.648-.272-.296-.408-.684-.408-1.164 0-.64.236-1.12.708-1.44.472-.32 1.164-.48 2.076-.48.688 0 1.328.084 1.92.252.253.072.485.15.695.236l.072.032v2.336c0 .418-.18.7-.544.845l-.127.043c-.448.128-1.144.192-2.088.192zm11.7 1.968c.784 0 1.544-.128 2.28-.384.736-.256 1.332-.664 1.788-1.224.456-.56.692-1.288.708-2.184 0-.672-.116-1.216-.348-1.632-.232-.416-.532-.752-.9-1.008s-.768-.452-1.2-.588c-.432-.136-.848-.268-1.248-.396-.432-.128-.836-.256-1.212-.384s-.68-.304-.912-.528c-.232-.224-.348-.528-.348-.912 0-.448.208-.788.624-1.02.416-.232.936-.348 1.56-.348.672 0 1.264.112 1.776.336.512.224 1.056.488 1.632.792l-.024-2.16c-.512-.272-1.036-.504-1.572-.696-.536-.192-1.228-.296-2.076-.312-.512 0-1.036.068-1.572.204-.536.136-1.024.352-1.464.648-.44.296-.796.68-1.068 1.152-.272.472-.408 1.044-.408 1.716 0 .608.108 1.12.324 1.536.216.416.504.756.864 1.02s.756.472 1.188.624c.432.152.864.284 1.296.396.416.144.816.288 1.2.432.384.144.7.32.948.528.248.208.372.496.372.864 0 .432-.196.792-.588 1.08-.392.288-.932.432-1.62.432-.544 0-1.036-.056-1.476-.168-.44-.112-.86-.268-1.26-.468s-.808-.428-1.224-.684v2.376c.576.272 1.164.5 1.764.684.6.184 1.332.276 2.196.276zm12.314 0c.88 0 1.672-.076 2.376-.228.704-.152 1.336-.348 1.896-.588v-2.328c-.288.144-.632.292-1.032.444-.4.152-.836.276-1.308.372-.472.096-.98.144-1.524.144-1.216 0-2.136-.348-2.76-1.044-.535-.597-.84-1.431-.917-2.504l-.004-.076h8.457c.015-1.238-.123-2.337-.414-3.297l-.102-.315c-.36-1.032-.94-1.836-1.74-2.412-.8-.576-1.848-.864-3.144-.864-1.76 0-3.132.54-4.116 1.62-.984 1.08-1.476 2.668-1.476 4.764 0 1.36.236 2.512.708 3.456s1.144 1.656 2.016 2.136c.872.48 1.9.72 3.084.72zm2.621-7.68h-5.833l.011-.087c.047-.347.111-.657.195-.928l.066-.197c.232-.632.572-1.08 1.02-1.344.448-.264.992-.396 1.632-.396.992 0 1.72.284 2.184.852.357.437.59 1.07.702 1.9l.023.2z"></path></g></svg>';

        return apply_filters('woocommerce_gateway_icon', $icons_str, $this->id);
    }
}
